service: mi-proyecto-clean-architecture
frameworkVersion: '4'

provider:
    name: aws
    runtime: nodejs20.x
    region: us-east-1
    stage: dev
    environment:
        NASA_API_KEY: ${env:NASA_API_KEY}
        NASA_APOD_URL: ${env:NASA_APOD_URL}
        SWAPI_PEOPLE_URL: ${env:SWAPI_PEOPLE_URL}

functions:
    # Ejemplo: Endpoints para Star Wars People
    getPeople:
        handler: src/interface/lambda/handlers/swapiPeopleHandler.getPeopleHandler
        events:
            - http:
                  path: fusionados/people
                  method: get

    getPersonById:
        handler: src/interface/lambda/handlers/swapiPeopleHandler.getPersonByIdHandler
        events:
            - http:
                  path: fusionados/people/{id}
                  method: get

    # Ejemplo anterior: createUser
    createUser:
        handler: src/interface/lambda/handlers/userHandler.createUserHandler
        events:
            - http:
                  path: users
                  method: post

plugins:
    - serverless-offline
    - '@jimdo/serverless-dotenv'

custom:
    esbuild:
        bundle: true
        minify: false
        sourcemap: true
        target: 'node20'
        platform: 'node'
        concurrency: 10
        # tsconfig: 'tsconfig.json'
    dotenv:
        path: .env # ruta a tu archivo .env
        # Si quieres que se marquen como obligatorias ciertas variables:
        # required:
        #   - NASA_API_KEY
        #   - OTRA_VARIABLE
